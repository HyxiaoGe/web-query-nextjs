# Web Query - Next.js

åŸºäº Next.js å’Œ SearxNG çš„é€šç”¨ç½‘ç»œæœç´¢æœåŠ¡ï¼Œæä¾›ç®€æ´çš„æœç´¢ç•Œé¢å’Œå¼ºå¤§çš„ APIã€‚

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fyour-username%2Fweb-query-nextjs&env=SEARXNG_URL,UPSTASH_REDIS_REST_URL,UPSTASH_REDIS_REST_TOKEN&envDescription=Configure%20your%20search%20service&envLink=https%3A%2F%2Fgithub.com%2Fyour-username%2Fweb-query-nextjs%2Fblob%2Fmain%2Fdocs%2FDEPLOYMENT.md&project-name=web-query&repository-name=web-query)

## âœ¨ ç‰¹æ€§

- ğŸ” **æ™ºèƒ½æœç´¢**: èšåˆå¤šä¸ªæœç´¢å¼•æ“ç»“æœ
- âš¡ **é«˜æ€§èƒ½ç¼“å­˜**: Redis/å†…å­˜ç¼“å­˜ï¼Œæå‡æœç´¢é€Ÿåº¦
- ğŸ¨ **ç°ä»£ç•Œé¢**: åŸºäº Tailwind CSS çš„å“åº”å¼è®¾è®¡
- ğŸ“± **ç§»åŠ¨å‹å¥½**: å®Œç¾æ”¯æŒæ‰‹æœºå’Œå¹³æ¿è®¾å¤‡
- ğŸ›¡ï¸ **éšç§ä¿æŠ¤**: ä¸è¿½è¸ªç”¨æˆ·ï¼Œä¿æŠ¤æœç´¢éšç§
- ğŸš€ **æ˜“äºéƒ¨ç½²**: æ”¯æŒ Vercelã€Docker ç­‰å¤šç§éƒ¨ç½²æ–¹å¼

## ğŸ—ï¸ æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Next.js App   â”‚â”€â”€â”€â–¶â”‚   API Routes    â”‚â”€â”€â”€â–¶â”‚    SearxNG      â”‚
â”‚  (å‰ç«¯ç•Œé¢)      â”‚    â”‚  (æœç´¢API)      â”‚    â”‚  (æœç´¢å¼•æ“)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚     Redis       â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚   (ç¼“å­˜æœåŠ¡)     â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ 1: æœ¬åœ°å¼€å‘

```bash
# å…‹éš†é¡¹ç›®
git clone <your-repo-url>
cd web-query-nextjs

# å®‰è£…ä¾èµ–
npm install

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.local.example .env.local
# ç¼–è¾‘ .env.local æ–‡ä»¶

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

è®¿é—® http://localhost:3000

### æ–¹å¼ 2: Docker å¼€å‘

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f app
```

### æ–¹å¼ 3: Vercel éƒ¨ç½²

1. Fork è¿™ä¸ªé¡¹ç›®åˆ°ä½ çš„ GitHub
2. åœ¨ [Vercel](https://vercel.com) ä¸­å¯¼å…¥é¡¹ç›®
3. é…ç½®ç¯å¢ƒå˜é‡:
   - `SEARXNG_URL`: ä½ çš„ SearxNG æœåŠ¡åœ°å€
   - `REDIS_URL`: Redis è¿æ¥åœ°å€ï¼ˆå¯é€‰ï¼Œä¼šä½¿ç”¨å†…å­˜ç¼“å­˜ï¼‰
4. éƒ¨ç½²å®Œæˆï¼

## ğŸ“ é¡¹ç›®ç»“æ„

```
web-query-nextjs/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                  # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ api/             # API è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ search/      # æœç´¢ API
â”‚   â”‚   â”‚   â”œâ”€â”€ health/      # å¥åº·æ£€æŸ¥
â”‚   â”‚   â”‚   â””â”€â”€ admin/       # ç®¡ç† API (é¢„ç•™)
â”‚   â”‚   â”œâ”€â”€ layout.tsx       # å…¨å±€å¸ƒå±€
â”‚   â”‚   â””â”€â”€ page.tsx         # é¦–é¡µ
â”‚   â”œâ”€â”€ components/          # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/             # åŸºç¡€ UI ç»„ä»¶
â”‚   â”‚   â””â”€â”€ search/         # æœç´¢ç›¸å…³ç»„ä»¶
â”‚   â”œâ”€â”€ lib/                # å·¥å…·åº“
â”‚   â”‚   â”œâ”€â”€ search.ts       # æœç´¢æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ cache.ts        # ç¼“å­˜æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ auth.ts         # è®¤è¯æœåŠ¡ (é¢„ç•™)
â”‚   â”‚   â””â”€â”€ utils.ts        # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ types/              # TypeScript ç±»å‹
â”œâ”€â”€ searxng/                # SearxNG é…ç½®
â”œâ”€â”€ docker-compose.yml      # Docker ç¼–æ’
â”œâ”€â”€ vercel.json            # Vercel é…ç½®
â””â”€â”€ README.md              # é¡¹ç›®æ–‡æ¡£
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| `SEARXNG_URL` | SearxNG æœåŠ¡åœ°å€ | `http://localhost:8888` |
| `REDIS_URL` | Redis è¿æ¥åœ°å€ | `redis://localhost:6379` |
| `CACHE_TTL` | ç¼“å­˜è¿‡æœŸæ—¶é—´(ç§’) | `3600` |
| `MAX_RESULTS` | æœ€å¤§æœç´¢ç»“æœæ•° | `10` |
| `REQUEST_TIMEOUT` | è¯·æ±‚è¶…æ—¶æ—¶é—´(æ¯«ç§’) | `30000` |

### SearxNG é…ç½®

ç¼–è¾‘ `searxng/settings.yml` å¯ä»¥è‡ªå®šä¹‰ï¼š
- å¯ç”¨çš„æœç´¢å¼•æ“
- é»˜è®¤è¯­è¨€å’Œåœ°åŒº
- æœç´¢ç±»åˆ«
- éšç§è®¾ç½®

## ğŸ“¡ API æ¥å£

### æœç´¢æ¥å£

**POST** `/api/search`

```json
{
  "q": "æœç´¢å…³é”®è¯",
  "limit": 10,
  "language": "zh-CN",
  "categories": "general"
}
```

**å“åº”:**
```json
{
  "success": true,
  "query": "æœç´¢å…³é”®è¯",
  "results": [...],
  "count": 10,
  "cached": false,
  "timestamp": "2024-01-01T00:00:00.000Z"
}
```

### å¥åº·æ£€æŸ¥

**GET** `/api/health`

è¿”å›æœåŠ¡çŠ¶æ€å’Œå„ç»„ä»¶å¥åº·çŠ¶å†µã€‚

## ğŸ¨ ç•Œé¢ç‰¹è‰²

- **ç®€æ´è®¾è®¡**: ç±»ä¼¼ Google çš„ç®€æ´æœç´¢ç•Œé¢
- **å“åº”å¼**: è‡ªé€‚åº”æ¡Œé¢ã€å¹³æ¿ã€æ‰‹æœº
- **æ·±è‰²æ¨¡å¼**: æ”¯æŒç³»ç»Ÿæ·±è‰²æ¨¡å¼åˆ‡æ¢
- **åŠ è½½åŠ¨ç”»**: ä¼˜é›…çš„æœç´¢åŠ è½½ä½“éªŒ
- **ç»“æœé«˜äº®**: æœç´¢å…³é”®è¯é«˜äº®æ˜¾ç¤º

## ğŸ”® æ‰©å±•åŠŸèƒ½ (é¢„ç•™æ¥å£)

å½“å‰æ˜¯ MVP ç‰ˆæœ¬ï¼Œå·²é¢„ç•™ä»¥ä¸‹æ‰©å±•æ¥å£ï¼š

### ğŸ” ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- ç”¨æˆ·æ³¨å†Œ/ç™»å½•
- JWT ä¼šè¯ç®¡ç†
- API Key ç®¡ç†

### ğŸ“Š ç®¡ç†åå°
- æœç´¢ç»Ÿè®¡åˆ†æ
- ç”¨æˆ·ç®¡ç†
- ç³»ç»Ÿç›‘æ§

### ğŸ¯ é«˜çº§åŠŸèƒ½
- æœç´¢å†å²
- ä¸ªæ€§åŒ–æ¨è
- é«˜çº§æœç´¢é€‰é¡¹
- æœç´¢ç»“æœå¯¼å‡º

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„æœç´¢å¼•æ“

1. ç¼–è¾‘ `searxng/settings.yml`
2. åœ¨ `engines` éƒ¨åˆ†æ·»åŠ é…ç½®
3. é‡å¯ SearxNG æœåŠ¡

### è‡ªå®šä¹‰ç•Œé¢

- ä¿®æ”¹ `src/app/globals.css` è°ƒæ•´æ ·å¼
- ç¼–è¾‘ `tailwind.config.js` è‡ªå®šä¹‰ä¸»é¢˜
- åœ¨ `src/components/` ä¸­æ·»åŠ æ–°ç»„ä»¶

### æ‰©å±• API

1. åœ¨ `src/app/api/` ä¸­åˆ›å»ºæ–°è·¯ç”±
2. ä½¿ç”¨ `src/types/` ä¸­çš„ç±»å‹å®šä¹‰
3. å‚è€ƒç°æœ‰ API çš„é”™è¯¯å¤„ç†æ¨¡å¼

## ğŸ³ Docker éƒ¨ç½²

### å¼€å‘ç¯å¢ƒ
```bash
docker-compose up -d
```

### ç”Ÿäº§ç¯å¢ƒ
```bash
# æ„å»ºç”Ÿäº§é•œåƒ
docker build -t web-query .

# è¿è¡Œå®¹å™¨
docker run -d -p 3000:3000 \
  -e SEARXNG_URL=http://your-searxng-url \
  -e REDIS_URL=redis://your-redis-url \
  web-query
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

- **ç¼“å­˜ç­–ç•¥**: æ™ºèƒ½ç¼“å­˜çƒ­é—¨æœç´¢
- **å“åº”å‹ç¼©**: è‡ªåŠ¨ Gzip å‹ç¼©
- **å›¾ç‰‡ä¼˜åŒ–**: Next.js è‡ªåŠ¨å›¾ç‰‡ä¼˜åŒ–
- **ä»£ç åˆ†å‰²**: æŒ‰éœ€åŠ è½½ç»„ä»¶
- **é™æ€ç”Ÿæˆ**: é™æ€é¡µé¢é¢„ç”Ÿæˆ

## ğŸ” æ•…éšœæ’é™¤

### SearxNG è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥ SearxNG çŠ¶æ€
curl http://localhost:8888/

# æŸ¥çœ‹ SearxNG æ—¥å¿—
docker-compose logs searxng
```

### Redis è¿æ¥é—®é¢˜
```bash
# æµ‹è¯• Redis è¿æ¥
redis-cli -h localhost -p 6379 ping

# æŸ¥çœ‹ Redis æ—¥å¿—
docker-compose logs redis
```

### å‰ç«¯æ„å»ºé”™è¯¯
```bash
# æ¸…é™¤æ„å»ºç¼“å­˜
rm -rf .next
npm run build
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤å˜æ›´
4. æ¨é€åˆ†æ”¯
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ”— ç›¸å…³é“¾æ¥

- [Next.js æ–‡æ¡£](https://nextjs.org/docs)
- [SearxNG é¡¹ç›®](https://github.com/searxng/searxng)
- [Tailwind CSS](https://tailwindcss.com)
- [Vercel éƒ¨ç½²](https://vercel.com)
